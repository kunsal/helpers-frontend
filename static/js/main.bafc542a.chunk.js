(this["webpackJsonphelpers-frontend"]=this["webpackJsonphelpers-frontend"]||[]).push([[0],{124:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),s=n.n(r),c=n(15),i=n.n(c),o=(n(90),n(38)),l=(n(91),n(92),n(17)),u=n(13),d=n(5),h=n.n(d),p=n(7),b=n(8),j=n(9),m=n(12),g=n(11),f=n(23),x=n.n(f),O=n(24),v=n(74),y="SET_USER",k="CLEAR_USER",N="SET_USER_TOKEN",w="CLEAR_USER_TOKEN",C=[],E=null,S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return t.payload;case k:return C;default:return e}},A=Object(O.combineReducers)({user:S,token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return t.payload;case w:return E;default:return e}}}),R=n(61),L=n(76),I={key:"root",storage:n.n(L).a},T=Object(R.a)(I,A),P=Object(O.createStore)(T,Object(v.composeWithDevTools)()),F=Object(R.b)(P),D=P,M=function(){function e(){var t=this;Object(b.a)(this,e),this.baseurl="https://kunsal-helpers.herokuapp.com",this.getToken=function(){var e=D.getState();if(void 0!==e.token)return e.token},this.getUser=function(){var e=D.getState();return!(e.user.length<1)&&e.user},this.token=function(){return t.getToken()},this.endpoint=this.baseurl+"/api/v1"}return Object(j.a)(e,[{key:"errorMessage",value:function(e){return{errors:{error:[e]}}}}]),e}(),B=function(e){return{type:N,payload:e}},z=function(){return{type:w}},U=new(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).profile=Object(p.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.getUser()){t.next=4;break}return t.abrupt("return",e.getUser());case 4:return t.next=6,x.a.get(e.endpoint+"/profile",{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(e.token())}});case 6:return 200===(n=t.sent).status&&D.dispatch((a=n.data,{type:y,payload:a})),t.abrupt("return",n.data);case 9:case"end":return t.stop()}var a}),t)}))),e.isLoggedIn=Object(p.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.token()){t.next=4;break}return t.abrupt("return",!0);case 4:return t.abrupt("return",!1);case 5:case"end":return t.stop()}}),t)}))),e.logout=function(){D.dispatch(z()),D.dispatch({type:k})},e}return Object(j.a)(n,[{key:"register",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post("".concat(this.endpoint,"/users"),JSON.stringify(t),{headers:{"Content-Type":"application/json",Accept:"application/json"}});case 3:if(201!==(n=e.sent).status){e.next=10;break}return a=n.data.token,D.dispatch(B(a)),e.abrupt("return",n.data);case 10:throw new Error("Could not save user. Please try again");case 11:e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(0),422!==e.t0.response.status){e.next=17;break}return e.abrupt("return",e.t0.response.data);case 17:if(!(e.t0.response.status<422)){e.next=19;break}return e.abrupt("return",this.errorMessage(e.t0.response.data.message));case 19:throw new Error("An error occurred. Please try again",e.t0.response);case 20:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(p.a)(h.a.mark((function e(t,n){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D.dispatch(z()),e.prev=1,e.next=4,x.a.post("".concat(this.endpoint,"/login"),{email:t,password:n});case 4:if(200!==(a=e.sent).status){e.next=11;break}return r=a.data.token,D.dispatch(B(r)),e.abrupt("return",!0);case 11:throw new Error("An error occurred.");case 12:e.next=21;break;case 14:if(e.prev=14,e.t0=e.catch(1),422!==e.t0.response.status){e.next=18;break}return e.abrupt("return",e.t0.response.data);case 18:if(!(e.t0.response.status<422)){e.next=20;break}return e.abrupt("return",this.errorMessage(e.t0.response.data.message));case 20:return e.abrupt("return",this.errorMessage("An error occurred. Please try again"));case 21:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(M)),q=n(53),Y=n.p+"static/media/red-marker.f96aeb96.svg",H=n.p+"static/media/black-marker.c9061a4b.svg",V=n(16),W=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={defaultWidth:30},e.handleMouseOver=function(e){e.target.width=45},e.handleMouseOut=function(t){t.target.width=e.state.defaultWidth},e}return Object(j.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)(V.a,{children:Object(a.jsx)("style",{children:"\n            .marker {\n              cursor: pointer\n            }\n          "})}),Object(a.jsx)("img",{src:"blue"===this.props.type?Y:H,width:this.state.defaultWidth,className:"marker",onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseOut,onClick:this.props.handleOpen})]})}}]),n}(r.Component),G=n(45),K=n.n(G),Z=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).consumer=K.a.createConsumer("".concat("wss://kunsal-helpers.herokuapp.com","/cable?token=").concat(U.token())),e}return Object(j.a)(n,[{key:"render",value:function(){return null}}]),n}(s.a.Component),Q=new(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"create",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post("".concat(this.endpoint,"/helps"),JSON.stringify(t),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(this.token())}});case 3:if(201!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",n);case 6:e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(0),422!==e.t0.response.status){e.next=12;break}return e.abrupt("return",e.t0.response);case 12:throw new Error(e.t0.response);case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getHelps",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(this.endpoint,"/helps"),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(this.token())}});case 3:if(t=e.sent,console.log(t),200!==t.status){e.next=7;break}return e.abrupt("return",t.data);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"getHelp",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(this.endpoint,"/helps/").concat(t),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(this.token())}});case 3:if(200!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",n.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"categories",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(this.endpoint,"/categories"),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(this.token())}});case 3:if(t=e.sent,console.log(t),200!==t.status){e.next=9;break}return e.abrupt("return",t.data);case 9:throw new Error("Something happened");case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),console.log(e.t0.response),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()}]),n}(M)),X=n(46),_=n.n(X),J=n(128),$=n(126),ee=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={user:null,center:{lat:6.507882833566003,lng:3.361924141847338},zoom:13,helps:[],showModal:!1,help:null},e.handleClose=function(){e.setState({showModal:!1})},e.handleModalOpen=function(t){e.setState({help:t,showModal:!0})},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,n=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.getHelps();case 2:(t=e.sent)&&this.setState({helps:t}),this.setState({user:U.getUser()}),this.notification=this.consumer.subscriptions.create({channel:"HelpListChannel"},{connected:function(){console.log("connected to help list channel")},received:function(e){n.setState({helps:e.helps})}});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.helps,r=t.showModal,c=t.help;return Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)(V.b,{children:Object(a.jsx)("style",{type:"text/css",children:"\n          body {\n            background-color: rgb(222, 217, 251);\n          }\n          #map {\n            height: 90vh;\n          }   \n          @media screen and (min-width: 700px) {\n            .help-list {\n              height: 78vh;\n              overflow: scroll;\n            }\n          }\n          .stats {\n            text-align: center;\n          }\n          .stat-title {\n            font-size: 18px;\n            letter-spacing: 5px;\n            color: #6b55e4;\n          }\n          .stat-value {\n            font-size: 50px;\n            font-weight: bold;\n            line-height: 1;\n          }\n          .meta {\n            font-size: 12px;\n          }\n          .card-text {\n            font-size: 14px !important;\n            color: #666;\n\n          }\n\n          @media screen and (max-width: 759px) {\n            #map {\n              height: 50vh;\n            }\n          }\n          \n        "})}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-md-8 col-sm-12",children:Object(a.jsx)("div",{id:"map",children:Object(a.jsx)(q.a,{bootstrapURLKeys:{key:Object({NODE_ENV:"production",PUBLIC_URL:"/helpers-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAP_KEY:"AIzaSyCs8rvda2R2CEy9tVbhzimcNl9R8ec54mQ",REACT_APP_API_URL:"https://kunsal-helpers.herokuapp.com",REACT_APP_SOCKET_URL:"wss://kunsal-helpers.herokuapp.com"}).REACT_APP_GOOGLE_MAPS_API_KEY},defaultCenter:this.state.center,defaultZoom:this.state.zoom,yesIWantToUseGoogleMapApiInternals:!0,children:n&&n.map((function(t){var n=t.location.split(","),r=n[0],s=n[1];return Object(a.jsx)(W,{lat:r,lng:s,handleOpen:function(){return e.handleModalOpen(t)},type:t.category.color},t.id)}))})})}),Object(a.jsxs)("div",{className:"col-md-4",children:[Object(a.jsxs)("div",{className:"stats",children:[Object(a.jsx)("p",{className:"stat-title",children:"UNFULFILLED HELPS"}),Object(a.jsx)("p",{className:"stat-value",children:n.length})]}),Object(a.jsx)("div",{className:"help-list",children:n&&n.length>0?n.map((function(t){return Object(a.jsxs)("div",{className:"card mb-3",children:[Object(a.jsx)("div",{className:"card-header",style:{},children:t.title}),Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsxs)("div",{className:"row meta",children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)("span",{className:"label",style:{backgroundColor:t.category.color,padding:"2px 8px",color:"white",borderRadius:"7px",fontWeight:"bold"},children:t.category.name})}),Object(a.jsxs)("div",{className:"col-md-6 text-end",children:["Posted ",Object(a.jsx)("span",{style:{fontWeight:"bold"},children:_()(t.created_at).fromNow()})]})]}),Object(a.jsxs)("p",{className:"card-text",children:[t.description.substring(0,70),"...",Object(a.jsx)(l.b,{as:"a",onClick:function(){return e.handleModalOpen(t)},children:"View Details"})]})]}),Object(a.jsxs)("div",{className:"card-footer text-end",style:{fontSize:12},children:["Requested by ",Object(a.jsxs)("span",{style:{fontWeight:"bold"},children:[t.user.first_name," ",t.user.last_name]})]})]},t.id)})):Object(a.jsx)("div",{className:"alert alert-info",children:"No help found"})})]}),Object(a.jsx)(J.a,{show:r,onHide:this.handleClose,backdrop:"static",keyboard:!1,children:c&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(J.a.Header,{children:Object(a.jsx)(J.a.Title,{children:c.title})}),Object(a.jsx)(J.a.Body,{children:c.description}),Object(a.jsxs)(J.a.Footer,{children:[Object(a.jsx)($.a,{variant:"secondary",onClick:this.handleClose,children:"Close"}),Object(a.jsx)(l.b,{to:"/help/".concat(c.id),className:"btn btn-primary",children:c.user_id===this.state.user.id?"View Offers":"Offer Help"})]})]})})]})]})}}]),n}(Z),te=n(130),ne=n(127),ae=n(129),re=n(19);function se(){return U.isLoggedIn()}var ce=function(e){var t=e.width;return t=void 0===t?150:t,Object(a.jsx)("img",{src:"data:image/png;base64,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",width:t,alt:"Logo"})},ie=(Object(re.a)(),function(e,t){var n=Le.filter((function(e){return!0===e.useInNavbar}));return Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)(l.b,{to:"/",className:"navbar-brand",children:Object(a.jsx)(ce,{})}),Object(a.jsx)(te.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(a.jsxs)(te.a.Collapse,{id:"responsive-navbar-nav",children:[Object(a.jsx)(ae.a,{className:"me-auto mb-2 mb-lg-0",children:n.map((function(e){return Object(a.jsx)(l.b,{className:"nav-link mx-1",to:e.link,children:e.title},e.link)}))}),Object(a.jsxs)(ae.a,{children:[e&&Object(a.jsxs)("a",{href:"#",className:"nav-link username",children:["Hi ",e.first_name]}),!se()&&Object(a.jsx)(l.b,{className:"btn btn-primary",to:"/login",children:"Login"}),se()&&Object(a.jsx)("button",{className:"btn btn-danger mr-1",onClick:t,children:"Logout"})]})]})]})}),oe=function(e){var t=e.containerized,n=e.logout,r=e.user;Le.filter((function(e){return!0===e.useInNavbar}));return Object(a.jsx)(te.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",className:"nav-transparent nav-tall",children:t?Object(a.jsx)(ne.a,{children:ie(r,n)}):ie(r,n)})};function le(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:if(e.sent){e.next=4;break}return e.abrupt("return",t.history.push("/login"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var de={};de.cable=K.a.createConsumer("ws://localhost:8800/cable?token=".concat(U.token()));var he=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e.handleLogout=function(){U.logout(),e.props.history.push("/login")},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(this.props),e.next=3,U.isLoggedIn();case 3:if(!e.sent){e.next=8;break}return e.next=6,U.profile();case 6:t=e.sent,this.setState({user:t});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le(this.props);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.children,t="Helpers",n=s.a.Children.map(e,(function(e){return s.a.cloneElement(e,{cableApp:de.cable,appName:t})}));return Object(a.jsxs)("main",{className:"",children:[Object(a.jsxs)(V.a,{children:[Object(a.jsx)("title",{children:t}),Object(a.jsx)("style",{type:"text/css",children:"\n            .nav-link {\n              color: #ccc !important;\n              letter-spacing: 1px;\n              font-weight: bold;\n              font-size: 15px;\n            }\n\n            .nav-link:hover, .nav-link:active {\n              color: #fff !important; \n            }\n\n            .nav-link.username {\n              text-decoration: none !important;\n              letter-spacing: 1px;\n              font-weight: normal;\n            }\n          "})]}),Object(a.jsx)(oe,{logout:this.handleLogout,user:this.state.user}),n]})}}]),n}(r.Component),pe=Object(u.f)(he),be=n(26),je=n.p+"static/media/group-chat.e24feb6f.svg";function me(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t.history.push("/"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe=n(62),xe=function(e){var t=e.messageclasses,n=e.message;t+=" alert-dismissible fade show";var s=Object(r.useState)(!1),c=Object(fe.a)(s,2),i=c[0],o=c[1],l=Object(r.useState)(""),u=Object(fe.a)(l,2),d=u[0],h=u[1];return Object(r.useEffect)((function(){h(n),""!==d?o(!0):(o(!1),n="")})),i&&Object(a.jsxs)("div",{className:t,children:[d,Object(a.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert",onClick:function(){h("")},"aria-label":"Close"})]})},Oe=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1,message:"",email:"",password:"",loading:!1},e.handleChange=function(t){e.setState(Object(be.a)({},t.target.name,t.target.value))},e.handleLogin=Object(p.a)(h.a.mark((function t(){var n,a,r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,a=n.email,r=n.password,""!=a){t.next=5;break}e.setState({hasError:!0,message:"Email is required"}),t.next=14;break;case 5:if(""!=r){t.next=9;break}e.setState({hasError:!0,message:"Password is required"}),t.next=14;break;case 9:return e.setState({hasError:!1,message:"",loading:!0}),t.next=12,U.login(a,r);case 12:(s=t.sent).hasOwnProperty("errors")?e.setState({hasError:!0,message:s.errors.error[0],loading:!1}):e.setState({hasError:!1,message:"Logged in successfully",loading:!1});case 14:case"end":return t.stop()}}),t)}))),e}return Object(j.a)(n,[{key:"componentDidUpdate",value:function(){me(this.props)}},{key:"render",value:function(){var e=this.state,t=e.hasError,n=e.message,r=e.email,c=e.password,i=e.loading,o="alert";return t&&(o+=" alert-danger"),t||""===n||(o+=" alert-success"),Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)(V.a,{children:Object(a.jsx)("title",{children:"Login"})}),Object(a.jsxs)("div",{className:"row wrapper",children:[Object(a.jsx)("div",{className:"col-md-12 text-center",children:Object(a.jsx)(l.b,{to:"/",children:Object(a.jsx)(ce,{width:200})})}),Object(a.jsx)("div",{className:"col-md-6 centralize",children:Object(a.jsx)("img",{src:je,width:"100%"})}),Object(a.jsxs)("div",{className:"col-md-6 form-wrapper",children:[Object(a.jsx)("h2",{className:"page-title",children:"Login"}),Object(a.jsx)(xe,{messageclasses:o,message:n}),Object(a.jsxs)("div",{className:"form-group my-2",children:[Object(a.jsx)("label",{htmlFor:"email",className:"control-label",children:"Email"}),Object(a.jsx)("input",{type:"email",name:"email",value:r,onChange:this.handleChange,className:"form-control"})]}),Object(a.jsxs)("div",{className:"form-group my-2",children:[Object(a.jsx)("label",{htmlFor:"password",className:"control-label",children:"Password"}),Object(a.jsx)("input",{type:"password",name:"password",value:c,onChange:this.handleChange,className:"form-control"})]}),Object(a.jsx)("button",{className:"btn btn-primary submit my-2",onClick:this.handleLogin,disabled:!!i,children:i?"...":"Login"}),Object(a.jsx)(l.b,{to:"/register",id:"registration-link",children:"No account? Register"})]})]})]})}}]),n}(r.Component),ve=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){me(this.props)}},{key:"render",value:function(){return Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsxs)(V.a,{children:[Object(a.jsx)("meta",{charSet:"utf-8"}),Object(a.jsx)("style",{type:"text/css",children:"\n              html, body {\n                height: 100%;\n                display: flex;\n              }\n              body {\n                background-color: #d2d2d2;\n                background-image: url(https://cdn.pixabay.com/photo/2020/01/04/18/40/trees-4741364_960_720.png);\n                background-size: cover;\n              }\n\n              .main-container {\n                display: flex !important;\n                justify-content: center;\n                align-items: center;\n                height: 100%;\n              }\n\n              .wrapper {\n                background-color: #fcfcfc;\n                padding: 20px;\n                border-radius: 15px;\n                box-shadow: 10px 10px 20px 10px #999; \n                width: 80%;\n                min-height: 400px;\n              }\n\n              .centralize {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n              }\n\n              .form-wrapper {\n                display: flex;\n                flex-direction: column;\n                align-items: space-around\n              }\n\n              .page-title {\n                font-size: 22px;\n                letter-spacing: 2px;\n              }\n            "})]}),Object(a.jsx)("div",{className:"main-container",children:this.props.children})]})}}]),n}(r.Component),ye=n(83),ke=n(35),Ne=n.n(ke),we=new(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"create",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post("".concat(this.endpoint,"/chats"),JSON.stringify(t),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(this.token())}});case 3:if(201!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",n);case 6:e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(0),422!==e.t0.response.status){e.next=12;break}return e.abrupt("return",e.t0.response);case 12:throw new Error(e.t0.response);case 13:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(this.endpoint,"/chats/help/").concat(t),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(this.token())}});case 3:if(200!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",n.data);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(M)),Ce=n.p+"static/media/verified.7ecb90a5.svg",Ee=n.p+"static/media/cancel.09453510.svg",Se=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(b.a)(this,n),(e=t.call(this)).state={help:!1,message:"",chats:[],typing:"",fulfilled:!1},e.handleChange=function(t){e.setState(Object(be.a)({},t.target.name,t.target.value))},e.handleSubmit=Object(p.a)(h.a.mark((function t(){var n,a,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.message,r=n.help,t.prev=1,e.subscription.send({id:e.state.help.id,message:a}),t.next=5,we.create({help_id:r.id,user_id:we.getUser().id,message:a});case 5:e.chatBottom.current.scrollIntoView(),e.setState({message:""}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log("Something went wrong");case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),e.handleKeyPress=function(){var t=Object(p.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(13!==n.charCode||n.ctrlKey){t.next=5;break}return e.notification.send({key:"typing"}),console.log("Control clicked"),t.next=5,e.handleSubmit();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleKeyUp=function(){var t=Object(p.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.notification.send({key:"not typing"});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.chatBottom=s.a.createRef(),e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,n=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.getHelp(this.props.match.params.id);case 3:t=e.sent,this.setState({help:t,fulfilled:t.status}),this.subscription=this.consumer.subscriptions.create({channel:"ChatsChannel",id:t.id},{connected:function(){console.log("Connection successful")},received:function(e){void 0!==e.initial?n.setState({chats:JSON.parse(e.chats)}):(e=JSON.parse(e),n.setState({chats:[].concat(Object(ye.a)(n.state.chats),[e])}))}}),this.notification=this.consumer.subscriptions.create({channel:"NotificationChannel",id:t.id},{connected:function(){console.log("connected to notification")},received:function(e){n.setState({typing:e.message})}}),this.status=this.consumer.subscriptions.create({channel:"StatusChannel",id:t.id},{connected:function(){console.log("connected to status channel")},received:function(e){n.setState({fulfilled:e.status})}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.help,n=e.chats,r=e.typing,c=e.fulfilled,i=U.getUser();return Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("div",{className:"row page-container",children:[Object(a.jsxs)(V.b,{children:[Object(a.jsx)("title",{children:t&&t.title}),Object(a.jsx)("style",{type:"text/css",children:'\n            @import url(\'https://fonts.googleapis.com/css2?family=Poppins:wght@900&display=swap\');\n            .page-container {\n              padding-top: 10px;\n            }\n\n            .chat-box {\n              width: 45%;\n              border-radius: 0 10px;\n              margin-bottom: 5px;\n            }\n            .chat-container {\n              position: relative;\n              height: 78vh;  \n              overflow: scroll;\n              background: #fcfcfc;\n            }\n            .beneficiary {\n              background: #e0fde4;\n              border: 1px solid #e0fde4;\n            }\n            .volunteer {\n              background: #fde0e0;\n              border: 1px solid #fde0e0;\n            }\n            .user-name {\n              font-size: 10px;\n              font-weight: bold;\n              margin-bottom: -7px; \n            }\n            .beneficiary .user-name {\n              color: green;\n            }\n            .volunteer .user-name {\n              color: red;\n            }\n            .help-title {\n              font-family: "Poppins"\n            }\n            .requester {\n              font-family: "Poppins";\n              font-weight: 400;\n              color: #666;\n            }\n            // .chat-base {\n            //   position: relative;\n            //   bottom: 0;\n            // }\n          '})]}),Object(a.jsx)("div",{className:"col-md-5",children:t?Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)("div",{style:{height:"200px",width:"100%"},children:Object(a.jsx)(q.a,{bootstrapURLKeys:{key:Object({NODE_ENV:"production",PUBLIC_URL:"/helpers-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAP_KEY:"AIzaSyCs8rvda2R2CEy9tVbhzimcNl9R8ec54mQ",REACT_APP_API_URL:"https://kunsal-helpers.herokuapp.com",REACT_APP_SOCKET_URL:"wss://kunsal-helpers.herokuapp.com"}).REACT_APP_GOOGLE_MAPS_API_KEY},defaultCenter:[t.location.split(",")[0],t.location.split(",")[1]],defaultZoom:this.state.zoom,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){var t=e.map,n=e.maps;return console.log(t,n)},draggable:!1,children:Object(a.jsx)(W,{lat:t.location.split(",")[0],lng:t.location.split(",")[1],help:t})})})}),Object(a.jsx)("div",{className:"col-md-10",children:Object(a.jsx)("h2",{className:"help-title",children:t.title})}),Object(a.jsxs)("div",{className:"col-md-2 text-center",children:[Object(a.jsx)("img",{src:c?Ce:Ee,alt:"",width:"50"}),Object(a.jsx)("p",{children:c?"Fulfilled":"Unfulfilled"})]})]}),Object(a.jsxs)("p",{className:"",children:["Posted By: ",Object(a.jsxs)("span",{className:"requester",children:[t.user.first_name," ",t.user.last_name]}),Object(a.jsx)("span",{className:"mr-auto"})," "]}),Object(a.jsxs)("p",{className:"",children:["Category: ",Object(a.jsx)("span",{className:"requester",children:t.category.name}),Object(a.jsx)("span",{className:"mr-auto"})]}),Object(a.jsxs)("p",{className:"",children:["Posted: ",Object(a.jsx)("span",{className:"requester",children:_()(t.created_at).fromNow()}),Object(a.jsx)("span",{className:"mr-auto"})]}),Object(a.jsx)("p",{children:t.description})]}):Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsx)(Ne.a,{height:200})}),Object(a.jsxs)("div",{className:"col-md-offset-2 col-md-8",children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-md-10",children:Object(a.jsx)(Ne.a,{height:30,width:150})}),Object(a.jsx)("div",{className:"col-md-2",children:Object(a.jsx)(Ne.a,{circle:!0,height:70,width:70})})]}),Object(a.jsx)("br",{}),Object(a.jsx)(Ne.a,{height:20}),Object(a.jsx)(Ne.a,{height:20}),Object(a.jsx)(Ne.a,{height:20}),Object(a.jsx)(Ne.a,{height:50})]})]})}),Object(a.jsxs)("div",{className:"col-md-7",children:[Object(a.jsxs)("div",{className:"chat-container",children:[n.length>0?n.map((function(e){return Object(a.jsx)("div",{className:"row",children:e.user_id===i.id?Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)("div",{className:"col-md-6"}),Object(a.jsxs)("div",{className:"col-md-6 chat-box beneficiary",children:[Object(a.jsx)("p",{className:"user-name",children:"You"}),Object(a.jsx)("p",{children:e.message})]})]}):Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsxs)("div",{className:"col-md-6 chat-box volunteer",children:[Object(a.jsxs)("p",{className:"user-name",children:[e.user.first_name," ",e.user.last_name,e.user_id===t.user_id&&"(requester)"]}),Object(a.jsx)("p",{children:e.message})]}),Object(a.jsx)("div",{className:"col-md-6"})]})},e.id)})):Object(a.jsx)(s.a.Fragment,{children:Object(a.jsx)("div",{className:"alert alert-info",children:"Type a message to engage requester"})}),Object(a.jsx)("div",{ref:this.chatBottom})]}),Object(a.jsx)("div",{className:"row",children:!c&&Object(a.jsxs)("div",{className:"col-md-12",children:[Object(a.jsxs)("div",{className:"form-group",children:[""!==r&&Object(a.jsx)("p",{class:"text-info",children:r}),Object(a.jsx)("textarea",{name:"message",placeholder:"Your message here...",id:"message",value:this.state.message,className:"form-control",onChange:this.handleChange,onKeyDown:this.handleKeyPress,onKeyUp:this.handleKeyUp})]}),Object(a.jsx)("button",{onClick:this.handleSubmit,className:"btn btn-primary",children:"Submit"})]})})]})]})})}}]),n}(Z),Ae=n(50),Re=n.p+"static/media/give-box.1e719e61.svg",Le=[{title:"Home",component:ee,link:"/",exact:!0,useInNavbar:!0,transparentNav:!0,layout:pe},{title:"Login",component:Oe,link:"/login",exact:!0,useInNavbar:!1,transparentNav:!0,layout:ve},{title:"Register",component:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1,message:"",firstName:"",lastName:"",email:"",password:"",government_id:"",errors:[],loading:!1},e.handleChange=function(t){e.setState(Object(be.a)({},t.target.name,t.target.value))},e.handleFileChange=function(t){var n=t.target.files||t.dataTransfer.files;n.length&&e.createImage(n[0])},e.createImage=function(t){var n=new FileReader;n.onload=function(t){e.setState({government_id:t.target.result})},console.log(n),n.readAsDataURL(t)},e.handleRegister=Object(p.a)(h.a.mark((function t(){var n,a,r,s,c,i,o,l,u,d,p,b;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,a=n.firstName,r=n.lastName,s=n.email,c=n.password,i=n.government_id,""!==a){t.next=5;break}e.setState({hasError:!0,message:"First name is required"}),t.next=36;break;case 5:if(""!==r){t.next=9;break}e.setState({hasError:!0,message:"Last name is required"}),t.next=36;break;case 9:if(""!==s){t.next=13;break}e.setState({hasError:!0,message:"Email is required"}),t.next=36;break;case 13:if(""!==c){t.next=17;break}e.setState({hasError:!0,message:"Password is required"}),t.next=36;break;case 17:if(""!==i){t.next=21;break}e.setState({hasError:!0,message:"Government issued ID is required"}),t.next=36;break;case 21:if(!1!==e._validate_image(i)){t.next=25;break}e.setState({hasError:!0,message:"Invalid image type. Please use png, jpg or gif",government_id:""}),t.next=36;break;case 25:return e.setState({hasError:!1,message:"",loading:!0}),t.prev=26,t.next=29,U.register({first_name:a,last_name:r,email:s,password:c,government_id:i});case 29:if((o=t.sent).hasOwnProperty("token"))e.setState({message:o.message,first_name:"",last_name:"",email:"",password:"",government_id:"",loading:!1});else{for(u in l="",o){d=Object(Ae.a)(o[u]);try{for(d.s();!(p=d.n()).done;)b=p.value,l+="".concat(u.toUpperCase()," ").concat(b," | ")}catch(h){d.e(h)}finally{d.f()}}e.setState({hasError:!0,message:l,loading:!1})}t.next=36;break;case 33:t.prev=33,t.t0=t.catch(26),e.setState({hasError:!0,message:"An error occurred",loading:!1});case 36:case"end":return t.stop()}}),t,null,[[26,33]])}))),e._validate_image=function(e){var t=e.split(";")[0].split(":")[1];return console.log(t),"image/png"===t||"image/jpeg"===t||"image/gif"===t},e}return Object(j.a)(n,[{key:"componentDidUpdate",value:function(){me(this.props)}},{key:"render",value:function(){var e="alert",t=this.state,n=t.firstName,r=t.lastName,c=t.email,i=t.password,o=t.government_id,u=t.hasError,d=t.message,h=t.loading;return u&&(e+=" alert-danger"),u||""===d||(e+=" alert-success"),Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)(V.a,{children:Object(a.jsx)("title",{children:"Register"})}),Object(a.jsxs)("div",{className:"row wrapper",children:[Object(a.jsx)("div",{className:"col-md-12 text-center",children:Object(a.jsx)(l.b,{to:"/",children:Object(a.jsx)(ce,{width:200})})}),Object(a.jsx)("div",{className:"col-md-6 centralize",children:Object(a.jsx)("img",{src:Re,width:"100%"})}),Object(a.jsxs)("div",{className:"col-md-6 form-wrapper",children:[Object(a.jsx)("h2",{className:"page-title",children:"Register"}),Object(a.jsx)(xe,{messageclasses:e,message:d}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"firstName",className:"control-label",children:"First Name"}),Object(a.jsx)("input",{type:"text",name:"firstName",value:n,onChange:this.handleChange,className:"form-control"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"lastName",className:"control-label",children:"Last Name"}),Object(a.jsx)("input",{type:"text",name:"lastName",value:r,onChange:this.handleChange,className:"form-control"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"email",className:"control-label",children:"Email Address"}),Object(a.jsx)("input",{type:"text",name:"email",value:c,onChange:this.handleChange,className:"form-control"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",className:"control-label",children:"Password"}),Object(a.jsx)("input",{type:"password",name:"password",value:i,onChange:this.handleChange,className:"form-control"})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"government_id",className:"control-label",children:"Government Issued ID"}),Object(a.jsx)("input",{type:"file",onChange:this.handleFileChange,className:"form-control"}),Object(a.jsx)("img",{src:o,alt:"",id:"image-box",width:"150"})]}),Object(a.jsx)("button",{className:"btn btn-primary submit",onClick:this.handleRegister,disabled:!!h,children:h?"...":"Submit"}),Object(a.jsx)(l.b,{to:"/login",children:"Already registered? Login"})]})]})]})}}]),n}(r.Component),link:"/register",exact:!0,useInNavbar:!1,transparentNav:!0,layout:ve},{title:"Help Details",component:Se,link:"/help/:id",exact:!0,useInNavbar:!1,transparentNav:!0,layout:pe},{title:"Seek Help",component:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={categories:[],title:"",category:"",description:"",location:"",hasError:!1,message:"",loading:!1},e.handleChange=function(t){e.setState(Object(be.a)({},t.target.name,t.target.value))},e.handleFormSubmit=function(){var t=Object(p.a)(h.a.mark((function t(n){var a,r,s,c,i,o,l,u,d,p,b,j;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,r=a.title,s=a.category,c=a.description,i=a.location,e.setState({loading:!0}),""!==r){t.next=6;break}e.setState({hasError:!0,message:"Title is required"}),t.next=29;break;case 6:if(""!==s){t.next=10;break}e.setState({hasError:!0,message:"Category is required"}),t.next=29;break;case 10:if(""!==c){t.next=14;break}e.setState({hasError:!0,message:"Description is required"}),t.next=29;break;case 14:if(""!==i){t.next=18;break}e.setState({hasError:!0,message:"Location is required"}),t.next=29;break;case 18:return e.setState({hasError:!1,message:""}),t.prev=19,t.next=22,Q.create({title:r,category_id:s,description:c,location:i});case 22:if(201===(o=t.sent).status)console.log("success"),e.setState({message:"Help created successfully.",title:"",category:"",description:"",location:"",loading:!1});else{for(d in console.log("Here we are"),l="",u=o.data){p=Object(Ae.a)(u[d]);try{for(p.s();!(b=p.n()).done;)j=b.value,l+="".concat(d.toUpperCase()," ").concat(j," | ")}catch(n){p.e(n)}finally{p.f()}}e.setState({hasError:!0,message:l,loading:!1})}t.next=29;break;case 26:t.prev=26,t.t0=t.catch(19),e.setState({hasError:!0,message:"An error occurred",loading:!1});case 29:e.setState({loading:!1});case 30:case"end":return t.stop()}}),t,null,[[19,26]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Props from child",this.props),e.next=3,Q.categories();case 3:t=e.sent,this.setState({categories:t}),this.subscription=this.consumer.subscriptions.create({channel:"HelpsChannel",id:1},{received:function(e){console.log(e)},away:function(){}});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.title,n=e.category,r=e.description,c=e.location,i=e.categories,o=e.hasError,l=e.message,u=e.loading,d="alert";return o&&(d+=" alert-danger"),o||""===l||(d+=" alert-success"),Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)(V.a,{children:Object(a.jsxs)("title",{children:[this.props.appName," - Seek Help"]})}),Object(a.jsx)("div",{className:"container-fluid",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsx)("h2",{className:"page-title",children:"Seek for New Help"})}),Object(a.jsxs)("div",{className:"col-md-8",children:[Object(a.jsx)(xe,{messageclasses:d,message:l}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"control-label",children:"Title"}),Object(a.jsx)("input",{className:"form-control",value:t,name:"title",onChange:this.handleChange})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"control-label",children:"Category"}),Object(a.jsxs)("select",{className:"form-control",name:"category",onChange:this.handleChange,value:n,children:[Object(a.jsx)("option",{children:"-- Choose a category --"}),i.length>0&&i.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"control-label",children:"Description"}),Object(a.jsx)("textarea",{className:"form-control",value:r,name:"description",onChange:this.handleChange})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{className:"control-label",children:"Location (Enter long and lat coordinates)"}),Object(a.jsx)("input",{className:"form-control",value:c,name:"location",onChange:this.handleChange})]}),Object(a.jsx)("button",{className:"btn btn-primary",disabled:!!u,onClick:this.handleFormSubmit,children:u?"...":"Submit"})]})]})})]})}}]),n}(Z),link:"/help",exact:!0,useInNavbar:!0,transparentNav:!0,layout:pe}],Ie=n(84),Te=function(e){var t=e.component,n=e.layout,r=Object(Ie.a)(e,["component","layout"]);return Object(a.jsx)(u.a,Object(o.a)(Object(o.a)({},r),{},{render:function(e){return Object(a.jsx)(n,{children:Object(a.jsx)(t,Object(o.a)({},e))})}}))};var Pe=function(e){var t=e.props;return Object(a.jsxs)(l.a,{children:[Object(a.jsx)(V.a,{children:Object(a.jsx)("style",{children:"\n          .btn-primary {\n            color: #fff;\n            background-color: #6d62ff;\n            border-color: #6d62ff;\n          }\n\n          .btn-primary:hover {\n            background-color: #655cde;\n            border-color: #655cde;\n          }\n        "})}),Object(a.jsxs)(u.c,{children:[Le.map((function(e){return Object(a.jsx)(Te,Object(o.a)({layout:e.layout,path:e.link,component:e.component,exact:e.exact},t),e.link)})),";"]})]})},Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))},De=n(82),Me=n(81);i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(De.a,{store:D,children:Object(a.jsx)(Me.a,{loading:null,persistor:F,children:Object(a.jsx)(Pe,{})})})}),document.getElementById("root")),Fe()},90:function(e,t,n){},92:function(e,t,n){}},[[124,1,2]]]);
//# sourceMappingURL=main.bafc542a.chunk.js.map